<h1>Hello <%= @user.first_name %>.</h1>
<p>You can check out your progress right here</p>
<% c = @chart_data[:week_pomodoros].count %>
<p>You have completed <%= c > 0 ? c : "no" %> pomodoro<%= "s" if @chart_data[:week_pomodoros].count >1%> this week.</p>
<div class="row">
  <form action="/add" method="post" class="slim-form">
    <div class="row">
      <div class="two columns">
        <select style="text-align:center" class="u-full-width" name="hour">
          <% for i in 0..23 do %>
            <option value="<%=i%>"><%=i%>h</option>
          <%end%>
        </select>
      </div>
      <div class="four columns">
        <select class="u-full-width" name="day" style="text-align:center">
          <%for i in 0..6 do%>
            <option value="<%=@chart_data[:week_dates][i].to_i%>"><%=@chart_data[:week_dates][i].day%></option>
          <%end%>
        </select>
      </div>
      <div class="three columns">
        <input class="u-full-width" name="tag" placeholder="Tag" type="text"/>
      </div>
      <div class="three columns">
        <button class="u-full-width" type="submit">Add</button>
      </div>
    </div>
  </form>
</div>
<div class="row">
  <canvas id="pomodoro_time" width="800" height="400"></canvas>
</div>
<script src="/javascript/index.js"/></script>
<script>
  data.labels = <%=@chart_data[:week_dates].map{|d| d.day}%>;
  data.datasets[0].data = <%= @chart_data[:week_pomodoros]!=nil ? Array.new(7){|i| @chart_data[:week_pomodoros].select{|p| p.h.yday == @chart_data[:week_yday][i]}.count} : Array.new(7, 0)%>;
  var pomodoro_time = new Chart(ctx).Line(data,options);
</script>
